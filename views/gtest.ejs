<!DOCTYPE html>
<html lang="en">

<%- include('layouts/header') -%>

<body>
    <!-- Topbar Start -->
    <%- include('layouts/topbar') -%>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <%- include('layouts/navbar', { isAuthenticated: isAuthenticated, userType: userType }) -%>
    <!-- Navbar End -->

    <!-- Page Header Start -->
    <div class="container-fluid page-header py-6 my-6 mt-0 wow fadeIn" data-wow-delay="0.1s">
        <div class="container text-center">
            <h1 class="display-4 text-white animated slideInDown mb-4">G Test</h1>
            <nav aria-label="breadcrumb animated slideInDown">
                <ol class="breadcrumb justify-content-center mb-0">
                    <li class="breadcrumb-item"><a class="text-white" href="/">Home</a></li>
                    <li class="breadcrumb-item text-primary active" aria-current="page">G Test</li>
                </ol>
            </nav>
        </div>
    </div>
    <!-- Page Header End -->

    <!-- G Test Start -->
    <div class="container-xxl py-6">
        <div class="container">
            <div class="form-box">
                <h1>Retrieve Information</h1>
                <% if (typeof error !== 'undefined' && error !== null) { %>
                    <p style="color: red;"><%= error %></p>
                    <a href="/g2test" class="btn btn-primary">Go to G2 Page</a>
                    <a href="javascript:history.back()" class="btn btn-secondary">Go Back</a>
                <% } else if (!user) { %>
                    <form action="/gtest/fetch" method="POST">
                        <label for="licenseNumber">License Number</label>
                        <input type="text" id="licenseNumber" name="licenseNumber" placeholder="Enter your license number">
                        <button type="submit" class="submit-button">Submit</button>
                    </form>
                <% } else { %>
                    <form action="/gtest/update" method="POST">
                        <input type="hidden" name="licenseNumber" value="<%= user.licenseNumber %>">
                        <p>First Name: <%= user.firstName %></p>
                        <p>Last Name: <%= user.lastName %></p>
                        <p>License Number: <%= user.licenseNumber %></p>
                        <p>Age: <%= user.age %></p>
                        <p>Date of Birth: <%= user.dob.toISOString().split('T')[0] %></p>
                        <div class="form-group">
                            <label for="carMake">Car Make:</label>
                            <input type="text" class="form-control" name="carMake" value="<%= user.carDetails && user.carDetails.carMake ? user.carDetails.carMake : '' %>">
                        </div>
                        <div class="form-group">
                            <label for="carModel">Car Model:</label>
                            <input type="text" class="form-control" name="carModel" value="<%= user.carDetails && user.carDetails.carModel ? user.carDetails.carModel : '' %>">
                        </div>
                        <div class="form-group">
                            <label for="carYear">Car Year:</label>
                            <input type="number" class="form-control" name="carYear" value="<%= user.carDetails && user.carDetails.carYear ? user.carDetails.carYear : '' %>">
                        </div>
                        <div class="form-group">
                            <label for="carPlate">Car Plate:</label>
                            <input type="text" class="form-control" name="carPlate" value="<%= user.carDetails && user.carDetails.carPlate ? user.carDetails.carPlate : '' %>">
                        </div>
                        <button type="submit" class="btn btn-primary">Update</button>
                    </form>
                <% } %>
            </div>
        </div>
    </div>
    <!-- G Test End -->

    <%- include('layouts/footer') -%>

    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>

    <%- include('layouts/scripts') -%>
</body>

</html>
